#!/usr/bin/python3
import json
from PIL import Image, ImageDraw, ImageFont

outputname = "meme.png"

font_path = "font/Envy.ttf"
font_size = 50
font_width = 27
font_height = 51
font = ImageFont.truetype(font_path,font_size)

imgpath = "img/drake_800x800.png"
fn = "img/drake_800x800.json"

data = open(fn).read()
data = json.loads(data)

ta = data['text_areas']

message = ["hello","long message tha will not fit on a single line"]

class TextArea:
    def __init__(self, textAreaData, message):
        self.x1 = textAreaData[0]
        self.y1 = textAreaData[1]
        self.x2 = textAreaData[2]
        self.y2 = textAreaData[3]
        self.message = message

    def setx(self):
        return self.x1

    def sety(self):
        return self.y1

    def getText(self):
        return self.message

image = Image.open(imgpath)
draw = ImageDraw.Draw(image)

def drawText(m, textAreaData):
    textArea = TextArea(textAreaData, m)
    draw.text(
        xy=(textArea.setx(),textArea.sety()),
        text=textArea.getText(),
        fill=(0,0,0),font=font)

for i, a in enumerate(ta):
    m = message[i]
    drawText(m,a)

image.save(outputname)
